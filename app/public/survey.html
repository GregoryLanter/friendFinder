<!DOCTYPE html>
<html lang="en">

<!--Head section where we include or system type files bootstrap, font awesome jQuery-->
<head>
  <meta charset="UTF-8">
  <title>Friend Finder SURVEY.HTML</title>
  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <!--<link rel="stylesheet" type="text/css" href=".\style.css">-->
  <!--Styles for my page not mush its pretty basic-->
  <style>
    h4 {
      margin-bottom: 15px
    }

    select {
      margin-bottom: 25px
    }

    input {
      margin-bottom: 20px
    }

    /*Styling for our modal pop up*/
    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      padding-top: 100px;
      /* Location of the box */
      left: 39%;
      top: 0;
      width: 22%;
      /* Full width */
      height: 100%;
      /* Full height */
      overflow: auto;
      /* Enable scroll if needed */
      background-color: rgb(0, 0, 0);
      /* Fallback color */
      background-color: rgba(0, 0, 0, 0.4);
      /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
      /*background-color: #fefefe;*/
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
    }

    /* The Close Button */
    .close {
      color: #aaaaaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }

    #close{
      display: block;
    }
  </style>

<body>
  <!--HTML here you fill in a couple text boxes and some drop down questions then hot submit-->
  <div class="container">
    <h2>
      Survey Questions
    </h2>
    <hr>
    <h3>
      <strong>
        About You
      </strong>
    </h3>
    <h4>
      Name (Required)
    </h4>
    <input type="text" id="name" class="form-control" required="">
    <h4>
      Link to Photo Image (Required)
    </h4>
    <input type="text" id="photo" class="form-control" required="">
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I love vegetables.
    </h4>
    <select class="chosen-select" id="q1">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I Love to play sports.
    </h4>
    <select class="chosen-select" id="q2">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I rather code than anything else in the world.
    </h4>
    <select class="chosen-select" id="q3">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      Orcas are the best sea creature.
    </h4>
    <select class="chosen-select" id="q4">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I have a library card.
    </h4>
    <select class="chosen-select" id="q5">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      My favorite drink is beer.
    </h4>
    <select class="chosen-select" id="q6">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I never eat dessert.
    </h4>
    <select class="chosen-select" id="q7">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I love to travel.
    </h4>
    <select class="chosen-select" id="q8">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I am very serious about my faith.
    </h4>
    <select class="chosen-select" id="q9">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <h3>
      <strong>
        Question
      </strong>
    </h3>
    <h4>
      I believe in a two party political system.
    </h4>
    <select class="chosen-select" id="q10">
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>
    <hr>
    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
    <hr>
  </div>
  <div>

    <!--the entry/update of the trains will be added in a  modal-->
    <!-- The Modal -->
    <div id="myModal" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <div>
          <div class="card">
            <!--title for the modal-->
            <div id="modalHeader" class="card-header">
              Your Bestie
              <!--<button id="myBtn">Add Train</button> -->
            </div>
            <div class="card-body">
              <h2 id="displayName"></h2>
              <img id="picture" src="" alt="Friend Picture" class="friend picture" height="150px"
                width="150px">
              <!--button to submit-->
              <button id="close" type="submit" class="btn btn-primary">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script type="text/javascript">
    /*submit button will grab the data entered on the screen*/
    $("#submit").on("click", function (event) {
      event.preventDefault();
      var qArr = [];
      /* get teh answers from the question dropdowns*/
      for (var i = 1; i < 11; i++) {
        qArr.push(parseInt($("#q" + i).val().trim()));
      }
      //set up the  survey object to pass it to the function
      var newSurvey = {
        name: $("#name").val().trim(),
        photo: $("#photo").val().trim(),
        survey: qArr,
      };

      // Question: What does this code do??
      //this will send out the object we just created to the server side
      $.post("/api/friends", newSurvey)
        .then(function (data) {
          // wehn we return from the server side pop up our modal and display our bestie
          var modal = document.getElementById('myModal');
          console.log("add.html", data);
          //get teh name field and add name from the data
          var name = document.getElementById('displayName');
          name.innerText = data.name;
          //now add the picture
          var picture = document.getElementById('picture');
          picture.setAttribute("src", data.photo);

          modal.style.display = "block";
        });
    });
    //close button click
    $("#close").on("click", function (event) {
      event.preventDefault();
      document.getElementById('myModal').style.display = "none";
      //clear out the values so the next entry can start clean
      $("#name").val("");
      $("#photo").val("");
      for (var i = 1; i < 11; i++) {
        $("#q" + i).val(1);
      }
    })
  </script>
</body>

</html>